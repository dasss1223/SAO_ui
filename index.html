<div class="container">
    <aside class="sidebar">
        <!-- Calendar Card -->
        <div class="card" id="calendar-card">
            <div class="card-header">
                <span>📅</span>
                <span>日历</span>
            </div>
            <div class="card-body" id="calendar-body">
                <div id="game-progress" style="font-weight: bold; text-align: center; color: var(--accent-cyan); margin-bottom: 10px; font-size: 0.9rem;"></div>
                <div class="calendar-wrapper">
                    <details class="details-calendar-button" open>
                        <summary>月度视图</summary>
                        <div class="calendar-content">
                            <div class="calendar-header">
                                <div class="calendar-title"></div>
                                <div class="calendar-info"></div>
                            </div>
                            <div class="calendar-grid">
                                <div class="weekday">一</div>
                                <div class="weekday">二</div>
                                <div class="weekday">三</div>
                                <div class="weekday">四</div>
                                <div class="weekday">五</div>
                                <div class="weekday">六</div>
                                <div class="weekday">日</div>
                            </div>
                        </div>
                    </details>
                </div>
            </div>
        </div>

        <!-- Character Selector Card -->
        <div class="card" id="character-selector">
            <div class="card-header">
                <span>👥</span>
                <span id="character-selector-title">所有角色</span>
            </div>
            <div class="card-body">
                <details class="details-character-status" open>
                    <summary>角色列表</summary>
                    <div id="character-selector-body">
                        <!-- Character icons will be rendered here -->
                    </div>
                </details>
            </div>
        </div>

        <!-- User Status Card -->
        <div class="card" id="user-status-card">
            <div class="card-header">
                <span>👤</span>
                <span>角色状态</span>
            </div>
            <div class="card-body" id="user-status-body"></div>
        </div>

        <!-- Equipment Card -->
        <div class="card" id="equipment-card">
            <div class="card-header">
                <span>🎒</span>
                <span>装备</span>
            </div>
            <div class="card-body" id="equipment-body"></div>
        </div>

        <!-- Skill Card -->
        <div class="card" id="skill-card">
            <div class="card-header">
                <span>📜</span>
                <span>技能</span>
            </div>
            <div class="card-body" id="skill-body"></div>
        </div>

    </aside>

    <main class="main-content">
        <div class="story-panel sao-glow">
            <div class="story-content" id="story-content">$1</div>
        </div>

        <!-- Integrated Shop Panel -->
        <div class="card" id="shop-panel">
            <div class="shop-container">
                <header class="shop-header">
                    <h1>艾恩葛朗特商店</h1>
                    <div class="player-info">
                        <span>玩家: <span id="player-name"></span></span>
                        <span>持有珂尔: <span id="player-gold" class="player-gold"></span></span>
                    </div>
                    <button id="refresh-shop-btn" class="btn" style="margin-top: 10px;">手动刷新商店</button>
                </header>
        
                <div class="shop-tabs">
                    <button class="tab-btn active" data-tab="buy">购买</button>
                    <button class="tab-btn" data-tab="sell">出售</button>
                    <button class="tab-btn" data-tab="buyback">回购</button>
                    <button class="tab-btn" data-tab="skill-recall">技能回忆</button>
                </div>
        
                <main id="shop-content" class="shop-content">
                    <!-- Shop items will be dynamically inserted here -->
                </main>
            </div>
        </div>
    </main>
</div>

<!-- Equipment Modal -->
<div id="equipment-modal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-title" class="modal-title">选择装备</h2>
            <button id="modal-close" class="modal-close">&times;</button>
        </div>
        <div id="modal-body" class="modal-body">
            <!-- Inventory items will be rendered here -->
        </div>
    </div>
</div>
